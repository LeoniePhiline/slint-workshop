import { Button, VerticalBox, AboutSlint, Palette } from "std-widgets.slint";
import { BarGauge, LayoutMetrics, TitleBar, StatusBar } from "widgets.slint";

struct WeatherRecord {
    temperature: float, // Temperature in degrees Celsius
    humidity: float,    // Humidity in percent
    timestamp: string,
}

export global ViewModel {
    in property <bool> have-data;
    in property <WeatherRecord> weather;
    in property <[WeatherRecord]> reccords;
}

export component AppWindow inherits Window {
    in-out property<int> counter: 42;
    callback request-increase-value();

    height: LayoutMetrics.window-height;
    width: LayoutMetrics.window-width;

    VerticalBox {
        TitleBar {
            text: "Slint Weather Station";
        }

        BarGauge {
            has-value: true;
            value: 23.5;
            max-value: 50;
        }

        Text {
            horizontal-alignment: center;
            text: "Counter: \{root.counter}";
        }

        Button {
            text: "Increase value";

            clicked => {
                root.request-increase-value();
            }
        }

        StatusBar {
            text: ViewModel.weather.timestamp;
        }
    }
}
